{
  "flow_type": "template",
  "flow_subtype": "feature",
  "flow_name": "feat_notification_actions",
  "status": "released",
  "rows": [
    {
      "type": "title",
      "value": "Notification Actions",
      "_translations": {
        "value": {}
      },
      "name": "title_2",
      "_nested_name": "title_2"
    },
    {
      "type": "title",
      "value": "Permisions",
      "_translations": {
        "value": {}
      },
      "name": "title_3",
      "_nested_name": "title_3"
    },
    {
      "type": "text",
      "value": "A device can only receive permissions if explicitly granted. Usually a request is made on app load, but can also be sent as an action with response monitored in a field.\n\nPossible status descriptions are listed below",
      "_translations": {
        "value": {}
      },
      "name": "text_4",
      "_nested_name": "text_4"
    },
    {
      "type": "table",
      "value": "notification_permission_status",
      "_translations": {
        "value": {}
      },
      "parameter_list": {
        "display_columns": "status, description"
      },
      "name": "table_5",
      "_nested_name": "table_5"
    },
    {
      "type": "text",
      "value": "Status: **@fields._notification_permission_status**",
      "_translations": {
        "value": {}
      },
      "name": "text_6",
      "_nested_name": "text_6",
      "_dynamicFields": {
        "value": [
          {
            "fullExpression": "Status: **@fields._notification_permission_status**",
            "matchedExpression": "@fields._notification_permission_status",
            "type": "fields",
            "fieldName": "_notification_permission_status"
          }
        ]
      },
      "_dynamicDependencies": {
        "@fields._notification_permission_status": [
          "value"
        ]
      }
    },
    {
      "name": "should_show_request",
      "value": "@fields._notification_permission_status !== 'granted' && @fields._notification_permission_status !== 'denied'",
      "_translations": {
        "value": {}
      },
      "type": "set_variable",
      "_nested_name": "should_show_request",
      "_dynamicFields": {
        "value": [
          {
            "fullExpression": "@fields._notification_permission_status !== 'granted' && @fields._notification_permission_status !== 'denied'",
            "matchedExpression": "@fields._notification_permission_status",
            "type": "fields",
            "fieldName": "_notification_permission_status"
          },
          {
            "fullExpression": "@fields._notification_permission_status !== 'granted' && @fields._notification_permission_status !== 'denied'",
            "matchedExpression": "@fields._notification_permission_status",
            "type": "fields",
            "fieldName": "_notification_permission_status"
          }
        ]
      },
      "_dynamicDependencies": {
        "@fields._notification_permission_status": [
          "value",
          "value"
        ]
      }
    },
    {
      "type": "button",
      "value": "Request Permission",
      "_translations": {
        "value": {}
      },
      "action_list": [
        {
          "trigger": "click",
          "action_id": "notification",
          "args": [
            "request_permission"
          ],
          "_raw": "click | notification: request_permission"
        },
        {
          "trigger": "click",
          "action_id": "emit",
          "args": [
            "force_reprocess"
          ],
          "_raw": "click | emit: force_reprocess"
        }
      ],
      "condition": "@local.should_show_request",
      "name": "button_8",
      "_nested_name": "button_8",
      "_dynamicFields": {
        "condition": [
          {
            "fullExpression": "@local.should_show_request",
            "matchedExpression": "@local.should_show_request",
            "type": "local",
            "fieldName": "should_show_request"
          }
        ]
      },
      "_dynamicDependencies": {
        "@local.should_show_request": [
          "condition"
        ]
      }
    },
    {
      "type": "text",
      "value": "Notifications have been disabled by the user. \nPlease enable to use this feature",
      "_translations": {
        "value": {}
      },
      "condition": "@fields._notification_permission_status === 'denied'",
      "name": "text_9",
      "_nested_name": "text_9",
      "_dynamicFields": {
        "condition": [
          {
            "fullExpression": "@fields._notification_permission_status === 'denied'",
            "matchedExpression": "@fields._notification_permission_status",
            "type": "fields",
            "fieldName": "_notification_permission_status"
          }
        ]
      },
      "_dynamicDependencies": {
        "@fields._notification_permission_status": [
          "condition"
        ]
      }
    },
    {
      "type": "title",
      "value": "Create Notification",
      "_translations": {
        "value": {}
      },
      "name": "title_10",
      "_nested_name": "title_10"
    },
    {
      "type": "text",
      "value": "A one-time notification can be scheduled using an action",
      "_translations": {
        "value": {}
      },
      "name": "text_11",
      "_nested_name": "text_11"
    },
    {
      "type": "table",
      "value": "notification_action_params",
      "_translations": {
        "value": {}
      },
      "parameter_list": {
        "display_columns": "param, required, description"
      },
      "name": "table_12",
      "_nested_name": "table_12"
    },
    {
      "name": "tomorrow_datetime",
      "value": "@calc(date_fns.addDays(now(),1))",
      "_translations": {
        "value": {}
      },
      "type": "set_variable",
      "_nested_name": "tomorrow_datetime",
      "_dynamicFields": {
        "value": [
          {
            "fullExpression": "@calc(date_fns.addDays(now(),1))",
            "matchedExpression": "@calc(date_fns.addDays(now(),1))",
            "type": "calc",
            "fieldName": "date_fns.addDays(now(),1)"
          }
        ]
      },
      "_dynamicDependencies": {
        "@calc(date_fns.addDays(now(),1))": [
          "value"
        ]
      }
    },
    {
      "name": "test_notification",
      "parameter_list": {
        "id": "debug_notification,\ntitle"
      },
      "type": "set_variable",
      "_nested_name": "test_notification"
    },
    {
      "type": "button",
      "value": "Schedule Tomorrow\n@local.tomorrow_datetime",
      "_translations": {
        "value": {}
      },
      "action_list": [
        {
          "trigger": "click",
          "action_id": "notification",
          "args": [
            "create"
          ],
          "_raw": "click | notification: create |\nid: debug_notification,\ntitle: Notification Title,\ntext: Notification Text,\nschedule_at: @local.tomorrow_datetime",
          "params": {
            "id": "debug_notification",
            "title": "Notification Title",
            "text": "Notification Text",
            "schedule_at": "@local.tomorrow_datetime"
          }
        }
      ],
      "name": "button_15",
      "_nested_name": "button_15",
      "_dynamicFields": {
        "value": [
          {
            "fullExpression": "Schedule Tomorrow\n@local.tomorrow_datetime",
            "matchedExpression": "@local.tomorrow_datetime",
            "type": "local",
            "fieldName": "tomorrow_datetime"
          }
        ],
        "action_list": {
          "0": {
            "_raw": [
              {
                "fullExpression": "click | notification: create |\nid: debug_notification,\ntitle: Notification Title,\ntext: Notification Text,\nschedule_at: @local.tomorrow_datetime",
                "matchedExpression": "@local.tomorrow_datetime",
                "type": "local",
                "fieldName": "tomorrow_datetime"
              }
            ],
            "params": {
              "schedule_at": [
                {
                  "fullExpression": "@local.tomorrow_datetime",
                  "matchedExpression": "@local.tomorrow_datetime",
                  "type": "local",
                  "fieldName": "tomorrow_datetime"
                }
              ]
            }
          }
        }
      },
      "_dynamicDependencies": {
        "@local.tomorrow_datetime": [
          "value",
          "action_list.0._raw",
          "action_list.0.params.schedule_at"
        ]
      }
    },
    {
      "name": "next_monday_date",
      "value": "@calc(date_fns.nextMonday(now()))",
      "_translations": {
        "value": {}
      },
      "type": "set_variable",
      "_nested_name": "next_monday_date",
      "_dynamicFields": {
        "value": [
          {
            "fullExpression": "@calc(date_fns.nextMonday(now()))",
            "matchedExpression": "@calc(date_fns.nextMonday(now()))",
            "type": "calc",
            "fieldName": "date_fns.nextMonday(now())"
          }
        ]
      },
      "_dynamicDependencies": {
        "@calc(date_fns.nextMonday(now()))": [
          "value"
        ]
      }
    },
    {
      "name": "next_monday_datetime",
      "value": "@calc(date_fns.set(@local.next_monday_date,{ hours: 9, minutes: 0, seconds: 0 }))",
      "_translations": {
        "value": {}
      },
      "type": "set_variable",
      "_nested_name": "next_monday_datetime",
      "_dynamicFields": {
        "value": [
          {
            "fullExpression": "@calc(date_fns.set(@local.next_monday_date,{ hours: 9, minutes: 0, seconds: 0 }))",
            "matchedExpression": "@local.next_monday_date",
            "type": "local",
            "fieldName": "next_monday_date"
          },
          {
            "fullExpression": "@calc(date_fns.set(@local.next_monday_date,{ hours: 9, minutes: 0, seconds: 0 }))",
            "matchedExpression": "@calc(date_fns.set(@local.next_monday_date,{ hours: 9, minutes: 0, seconds: 0 }))",
            "type": "calc",
            "fieldName": "date_fns.set(@local.next_monday_date,{ hours: 9, minutes: 0, seconds: 0 })"
          }
        ]
      },
      "_dynamicDependencies": {
        "@local.next_monday_date": [
          "value"
        ],
        "@calc(date_fns.set(@local.next_monday_date,{ hours: 9, minutes: 0, seconds: 0 }))": [
          "value"
        ]
      }
    },
    {
      "type": "button",
      "value": "Schedule Next Monday at 9am\n@local.next_monday_datetime",
      "_translations": {
        "value": {}
      },
      "action_list": [
        {
          "trigger": "click",
          "action_id": "notification",
          "args": [
            "create"
          ],
          "_raw": "click | notification: create |\nid: debug_notification,\ntitle: Notification Title,\ntext: Notification Text,\nschedule_at: @local.next_monday_datetime",
          "params": {
            "id": "debug_notification",
            "title": "Notification Title",
            "text": "Notification Text",
            "schedule_at": "@local.next_monday_datetime"
          }
        }
      ],
      "name": "button_18",
      "_nested_name": "button_18",
      "_dynamicFields": {
        "value": [
          {
            "fullExpression": "Schedule Next Monday at 9am\n@local.next_monday_datetime",
            "matchedExpression": "@local.next_monday_datetime",
            "type": "local",
            "fieldName": "next_monday_datetime"
          }
        ],
        "action_list": {
          "0": {
            "_raw": [
              {
                "fullExpression": "click | notification: create |\nid: debug_notification,\ntitle: Notification Title,\ntext: Notification Text,\nschedule_at: @local.next_monday_datetime",
                "matchedExpression": "@local.next_monday_datetime",
                "type": "local",
                "fieldName": "next_monday_datetime"
              }
            ],
            "params": {
              "schedule_at": [
                {
                  "fullExpression": "@local.next_monday_datetime",
                  "matchedExpression": "@local.next_monday_datetime",
                  "type": "local",
                  "fieldName": "next_monday_datetime"
                }
              ]
            }
          }
        }
      },
      "_dynamicDependencies": {
        "@local.next_monday_datetime": [
          "value",
          "action_list.0._raw",
          "action_list.0.params.schedule_at"
        ]
      }
    },
    {
      "type": "text",
      "value": "Notifications can also be scheduled following user input",
      "_translations": {
        "value": {}
      },
      "name": "text_19",
      "_nested_name": "text_19"
    },
    {
      "type": "text_box",
      "name": "input_id",
      "value": "debug_notification",
      "_translations": {
        "value": {}
      },
      "parameter_list": {
        "placeholder": "Type your Notification ID"
      },
      "_nested_name": "input_id"
    },
    {
      "type": "text_box",
      "name": "input_title",
      "value": "Notification Title",
      "_translations": {
        "value": {}
      },
      "parameter_list": {
        "placeholder": "Type your Notification Title"
      },
      "_nested_name": "input_title"
    },
    {
      "type": "text_box",
      "name": "input_text",
      "value": "Notification Text",
      "_translations": {
        "value": {}
      },
      "parameter_list": {
        "placeholder": "Type your Notification Text"
      },
      "_nested_name": "input_text"
    },
    {
      "type": "date_time_picker",
      "name": "input_datetime",
      "_nested_name": "input_datetime"
    },
    {
      "value": "Schedule at input datetime\n@local.input_datetime",
      "_translations": {
        "value": {}
      },
      "type": "set_variable",
      "name": "set_variable_24",
      "_nested_name": "set_variable_24",
      "_dynamicFields": {
        "value": [
          {
            "fullExpression": "Schedule at input datetime\n@local.input_datetime",
            "matchedExpression": "@local.input_datetime",
            "type": "local",
            "fieldName": "input_datetime"
          }
        ]
      },
      "_dynamicDependencies": {
        "@local.input_datetime": [
          "value"
        ]
      }
    },
    {
      "type": "button",
      "value": "Schedule notification @local.input_id at @local.input_datetime",
      "_translations": {
        "value": {}
      },
      "action_list": [
        {
          "trigger": "click",
          "action_id": "notification",
          "args": [
            "create"
          ],
          "_raw": "click | notification: create |\nid: @local.input_id,\ntitle: @local.input_title,\ntext: @local.input_text,\nschedule_at: @local.input_datetime",
          "params": {
            "id": "@local.input_id",
            "title": "@local.input_title",
            "text": "@local.input_text",
            "schedule_at": "@local.input_datetime"
          }
        }
      ],
      "parameter_list": {
        "disabled": "!@local.input_datetime"
      },
      "name": "button_25",
      "_nested_name": "button_25",
      "_dynamicFields": {
        "value": [
          {
            "fullExpression": "Schedule notification @local.input_id at @local.input_datetime",
            "matchedExpression": "@local.input_id",
            "type": "local",
            "fieldName": "input_id"
          },
          {
            "fullExpression": "Schedule notification @local.input_id at @local.input_datetime",
            "matchedExpression": "@local.input_datetime",
            "type": "local",
            "fieldName": "input_datetime"
          }
        ],
        "action_list": {
          "0": {
            "_raw": [
              {
                "fullExpression": "click | notification: create |\nid: @local.input_id,\ntitle: @local.input_title,\ntext: @local.input_text,\nschedule_at: @local.input_datetime",
                "matchedExpression": "@local.input_id",
                "type": "local",
                "fieldName": "input_id"
              },
              {
                "fullExpression": "click | notification: create |\nid: @local.input_id,\ntitle: @local.input_title,\ntext: @local.input_text,\nschedule_at: @local.input_datetime",
                "matchedExpression": "@local.input_title",
                "type": "local",
                "fieldName": "input_title"
              },
              {
                "fullExpression": "click | notification: create |\nid: @local.input_id,\ntitle: @local.input_title,\ntext: @local.input_text,\nschedule_at: @local.input_datetime",
                "matchedExpression": "@local.input_text",
                "type": "local",
                "fieldName": "input_text"
              },
              {
                "fullExpression": "click | notification: create |\nid: @local.input_id,\ntitle: @local.input_title,\ntext: @local.input_text,\nschedule_at: @local.input_datetime",
                "matchedExpression": "@local.input_datetime",
                "type": "local",
                "fieldName": "input_datetime"
              }
            ],
            "params": {
              "id": [
                {
                  "fullExpression": "@local.input_id",
                  "matchedExpression": "@local.input_id",
                  "type": "local",
                  "fieldName": "input_id"
                }
              ],
              "title": [
                {
                  "fullExpression": "@local.input_title",
                  "matchedExpression": "@local.input_title",
                  "type": "local",
                  "fieldName": "input_title"
                }
              ],
              "text": [
                {
                  "fullExpression": "@local.input_text",
                  "matchedExpression": "@local.input_text",
                  "type": "local",
                  "fieldName": "input_text"
                }
              ],
              "schedule_at": [
                {
                  "fullExpression": "@local.input_datetime",
                  "matchedExpression": "@local.input_datetime",
                  "type": "local",
                  "fieldName": "input_datetime"
                }
              ]
            }
          }
        },
        "parameter_list": {
          "disabled": [
            {
              "fullExpression": "!@local.input_datetime",
              "matchedExpression": "!@local.input_datetime",
              "type": "local",
              "fieldName": "input_datetime"
            }
          ]
        }
      },
      "_dynamicDependencies": {
        "@local.input_id": [
          "value",
          "action_list.0._raw",
          "action_list.0.params.id"
        ],
        "@local.input_datetime": [
          "value",
          "action_list.0._raw",
          "action_list.0.params.schedule_at"
        ],
        "@local.input_title": [
          "action_list.0._raw",
          "action_list.0.params.title"
        ],
        "@local.input_text": [
          "action_list.0._raw",
          "action_list.0.params.text"
        ],
        "!@local.input_datetime": [
          "parameter_list.disabled"
        ]
      }
    },
    {
      "type": "title",
      "value": "Pending Notifications",
      "_translations": {
        "value": {}
      },
      "name": "title_26",
      "_nested_name": "title_26"
    },
    {
      "type": "text",
      "value": "Pending notifications can be retrieved from the internal `_notifications` data_list.\n\nSpecific notifications can be canceled by passing their id into the `notification: cancel` action. E.g.\n```\nclick | notification:cancel | id: @item.id\n```",
      "_translations": {
        "value": {}
      },
      "name": "text_27",
      "_nested_name": "text_27",
      "_dynamicFields": {
        "value": [
          {
            "fullExpression": "Pending notifications can be retrieved from the internal `_notifications` data_list.\n\nSpecific notifications can be canceled by passing their id into the `notification: cancel` action. E.g.\n```\nclick | notification:cancel | id: @item.id\n```",
            "matchedExpression": "@item.id",
            "type": "item",
            "fieldName": "id"
          }
        ]
      },
      "_dynamicDependencies": {
        "@item.id": [
          "value"
        ]
      }
    },
    {
      "type": "data_items",
      "value": "_notifications",
      "parameter_list": {
        "filter": "@item.status==='pending'"
      },
      "rows": [
        {
          "name": "formatted_date",
          "value": "@calc(new Date(@item.schedule_at).toString())",
          "_translations": {
            "value": {}
          },
          "type": "set_variable",
          "_nested_name": "data_items_28.formatted_date",
          "_dynamicFields": {
            "value": [
              {
                "fullExpression": "@calc(new Date(@item.schedule_at).toString())",
                "matchedExpression": "@item.schedule_at",
                "type": "item",
                "fieldName": "schedule_at"
              },
              {
                "fullExpression": "@calc(new Date(@item.schedule_at).toString())",
                "matchedExpression": "@calc(new Date(@item.schedule_at).toString())",
                "type": "calc",
                "fieldName": "new Date(@item.schedule_at).toString()"
              }
            ]
          },
          "_dynamicDependencies": {
            "@item.schedule_at": [
              "value"
            ],
            "@calc(new Date(@item.schedule_at).toString())": [
              "value"
            ]
          }
        },
        {
          "type": "text",
          "value": "id: @item.id\nschedule_at: @local.formatted_date",
          "_translations": {
            "value": {}
          },
          "style_list": [
            "color: var(--ion-color-secondary)"
          ],
          "name": "text_2_@item.id",
          "_nested_name": "data_items_28.text_2_@item.id",
          "_dynamicFields": {
            "value": [
              {
                "fullExpression": "id: @item.id\nschedule_at: @local.formatted_date",
                "matchedExpression": "@item.id",
                "type": "item",
                "fieldName": "id"
              },
              {
                "fullExpression": "id: @item.id\nschedule_at: @local.formatted_date",
                "matchedExpression": "@local.formatted_date",
                "type": "local",
                "fieldName": "formatted_date"
              }
            ],
            "name": [
              {
                "fullExpression": "text_2_@item.id",
                "matchedExpression": "@item.id",
                "type": "item",
                "fieldName": "id"
              }
            ],
            "_nested_name": [
              {
                "fullExpression": "data_items_28.text_2_@item.id",
                "matchedExpression": "@item.id",
                "type": "item",
                "fieldName": "id"
              }
            ]
          },
          "_dynamicDependencies": {
            "@item.id": [
              "value",
              "name",
              "_nested_name"
            ],
            "@local.formatted_date": [
              "value"
            ]
          }
        },
        {
          "type": "button",
          "value": "Cancel Notification",
          "_translations": {
            "value": {}
          },
          "action_list": [
            {
              "trigger": "click",
              "action_id": "notification",
              "args": [
                "cancel"
              ],
              "_raw": "click | notification: cancel | id: @item.id",
              "params": {
                "id": "@item.id"
              }
            }
          ],
          "name": "button_3_@item.id",
          "_nested_name": "data_items_28.button_3_@item.id",
          "_dynamicFields": {
            "action_list": {
              "0": {
                "_raw": [
                  {
                    "fullExpression": "click | notification: cancel | id: @item.id",
                    "matchedExpression": "@item.id",
                    "type": "item",
                    "fieldName": "id"
                  }
                ],
                "params": {
                  "id": [
                    {
                      "fullExpression": "@item.id",
                      "matchedExpression": "@item.id",
                      "type": "item",
                      "fieldName": "id"
                    }
                  ]
                }
              }
            },
            "name": [
              {
                "fullExpression": "button_3_@item.id",
                "matchedExpression": "@item.id",
                "type": "item",
                "fieldName": "id"
              }
            ],
            "_nested_name": [
              {
                "fullExpression": "data_items_28.button_3_@item.id",
                "matchedExpression": "@item.id",
                "type": "item",
                "fieldName": "id"
              }
            ]
          },
          "_dynamicDependencies": {
            "@item.id": [
              "action_list.0._raw",
              "action_list.0.params.id",
              "name",
              "_nested_name"
            ]
          }
        }
      ],
      "name": "data_items_28",
      "_nested_name": "data_items_28",
      "_dynamicFields": {
        "parameter_list": {
          "filter": [
            {
              "fullExpression": "@item.status==='pending'",
              "matchedExpression": "@item.status",
              "type": "item",
              "fieldName": "status"
            }
          ]
        }
      },
      "_dynamicDependencies": {
        "@item.status": [
          "parameter_list.filter"
        ]
      }
    },
    {
      "type": "text",
      "value": "It is also possible to cancel all notifications with the `notification | cancel_all` action",
      "_translations": {
        "value": {}
      },
      "name": "text_30",
      "_nested_name": "text_30"
    },
    {
      "type": "button",
      "value": "Cancel All Notifications",
      "_translations": {
        "value": {}
      },
      "action_list": [
        {
          "trigger": "click",
          "action_id": "notification",
          "args": [
            "cancel_all"
          ],
          "_raw": "click | notification: cancel_all"
        }
      ],
      "name": "button_31",
      "_nested_name": "button_31"
    },
    {
      "type": "title",
      "value": "Previous Notifications",
      "_translations": {
        "value": {}
      },
      "name": "title_32",
      "_nested_name": "title_32"
    },
    {
      "type": "text",
      "value": "Any notifications previously scheduled will also be stored in the `_notifications` data_list\n\nThese will have a `status` column either marked as `ignored` or `interacted`\n\nInteracted notifications will include an `action_performed` column with nested  `timestamp` and `id` property corresponding to the native action id",
      "_translations": {
        "value": {}
      },
      "name": "text_33",
      "_nested_name": "text_33"
    },
    {
      "type": "data_items",
      "value": "_notifications",
      "parameter_list": {
        "filter": "@item.status!=='pending'"
      },
      "rows": [
        {
          "name": "formatted_date",
          "value": "@calc(new Date(@item.schedule_at).toString())",
          "_translations": {
            "value": {}
          },
          "type": "set_variable",
          "_nested_name": "data_items_34.formatted_date",
          "_dynamicFields": {
            "value": [
              {
                "fullExpression": "@calc(new Date(@item.schedule_at).toString())",
                "matchedExpression": "@item.schedule_at",
                "type": "item",
                "fieldName": "schedule_at"
              },
              {
                "fullExpression": "@calc(new Date(@item.schedule_at).toString())",
                "matchedExpression": "@calc(new Date(@item.schedule_at).toString())",
                "type": "calc",
                "fieldName": "new Date(@item.schedule_at).toString()"
              }
            ]
          },
          "_dynamicDependencies": {
            "@item.schedule_at": [
              "value"
            ],
            "@calc(new Date(@item.schedule_at).toString())": [
              "value"
            ]
          }
        },
        {
          "type": "text",
          "value": "id: @item.id\nschedule_at: @local.formatted_date\nstatus: @item.status",
          "_translations": {
            "value": {}
          },
          "style_list": [
            "color: var(--ion-color-secondary)"
          ],
          "name": "text_2_@item.id",
          "_nested_name": "data_items_34.text_2_@item.id",
          "_dynamicFields": {
            "value": [
              {
                "fullExpression": "id: @item.id\nschedule_at: @local.formatted_date\nstatus: @item.status",
                "matchedExpression": "@item.id",
                "type": "item",
                "fieldName": "id"
              },
              {
                "fullExpression": "id: @item.id\nschedule_at: @local.formatted_date\nstatus: @item.status",
                "matchedExpression": "@local.formatted_date",
                "type": "local",
                "fieldName": "formatted_date"
              },
              {
                "fullExpression": "id: @item.id\nschedule_at: @local.formatted_date\nstatus: @item.status",
                "matchedExpression": "@item.status",
                "type": "item",
                "fieldName": "status"
              }
            ],
            "name": [
              {
                "fullExpression": "text_2_@item.id",
                "matchedExpression": "@item.id",
                "type": "item",
                "fieldName": "id"
              }
            ],
            "_nested_name": [
              {
                "fullExpression": "data_items_34.text_2_@item.id",
                "matchedExpression": "@item.id",
                "type": "item",
                "fieldName": "id"
              }
            ]
          },
          "_dynamicDependencies": {
            "@item.id": [
              "value",
              "name",
              "_nested_name"
            ],
            "@local.formatted_date": [
              "value"
            ],
            "@item.status": [
              "value"
            ]
          }
        },
        {
          "type": "text",
          "value": "Action ID: @item.action_performed.id\nAction Time: @item.action_performed.timestamp",
          "_translations": {
            "value": {}
          },
          "condition": "@item.action_performed",
          "style_list": [
            "color: var(--ion-color-secondary)"
          ],
          "name": "text_3_@item.id",
          "_nested_name": "data_items_34.text_3_@item.id",
          "_dynamicFields": {
            "value": [
              {
                "fullExpression": "Action ID: @item.action_performed.id\nAction Time: @item.action_performed.timestamp",
                "matchedExpression": "@item.action_performed.id",
                "type": "item",
                "fieldName": "action_performed"
              },
              {
                "fullExpression": "Action ID: @item.action_performed.id\nAction Time: @item.action_performed.timestamp",
                "matchedExpression": "@item.action_performed.timestamp",
                "type": "item",
                "fieldName": "action_performed"
              }
            ],
            "condition": [
              {
                "fullExpression": "@item.action_performed",
                "matchedExpression": "@item.action_performed",
                "type": "item",
                "fieldName": "action_performed"
              }
            ],
            "name": [
              {
                "fullExpression": "text_3_@item.id",
                "matchedExpression": "@item.id",
                "type": "item",
                "fieldName": "id"
              }
            ],
            "_nested_name": [
              {
                "fullExpression": "data_items_34.text_3_@item.id",
                "matchedExpression": "@item.id",
                "type": "item",
                "fieldName": "id"
              }
            ]
          },
          "_dynamicDependencies": {
            "@item.action_performed.id": [
              "value"
            ],
            "@item.action_performed.timestamp": [
              "value"
            ],
            "@item.action_performed": [
              "condition"
            ],
            "@item.id": [
              "name",
              "_nested_name"
            ]
          }
        }
      ],
      "name": "data_items_34",
      "_nested_name": "data_items_34",
      "_dynamicFields": {
        "parameter_list": {
          "filter": [
            {
              "fullExpression": "@item.status!=='pending'",
              "matchedExpression": "@item.status",
              "type": "item",
              "fieldName": "status"
            }
          ]
        }
      },
      "_dynamicDependencies": {
        "@item.status": [
          "parameter_list.filter"
        ]
      }
    },
    {
      "type": "title",
      "value": "Advanced Notification Schedules",
      "_translations": {
        "value": {}
      },
      "name": "title_36",
      "_nested_name": "title_36"
    },
    {
      "type": "text",
      "value": "An alternative notification scheduling system is implemented via the campaigns feature",
      "_translations": {
        "value": {}
      },
      "name": "text_37",
      "_nested_name": "text_37"
    },
    {
      "type": "button",
      "value": "Go to Debug Campaigns",
      "_translations": {
        "value": {}
      },
      "action_list": [
        {
          "trigger": "click",
          "action_id": "go_to",
          "args": [],
          "_raw": "click | go_to | debug_campaigns",
          "params": {}
        }
      ],
      "name": "button_38",
      "_nested_name": "button_38"
    },
    {
      "type": "title",
      "value": "Triggered action lists",
      "_translations": {
        "value": {}
      },
      "name": "title_39",
      "_nested_name": "title_39"
    },
    {
      "type": "text",
      "value": "Created notifications can also reference external action_lists to trigger after delivery. The following triggers can be used:\n\n|trigger|description|example|\n|---|---|---|\n|`notification_received`| Evaluated the next time the app is running past the notification scheduled date. Recommended for data updates, such as setting field to remind user of received notifications | notification_received &#124; set_field &#124; show_notification_bell: true |\n|`notification_interacted`| Evaluated if user taps notification (native only). Recommended for navigation shortcuts, such as sending user to page related to notification  | notification_interacted &#124; go_to : /example_template |",
      "_translations": {
        "value": {}
      },
      "name": "text_40",
      "_nested_name": "text_40"
    },
    {
      "name": "immediate_notification_time",
      "value": "@calc(date_fns.addSeconds(now(),10))",
      "_translations": {
        "value": {}
      },
      "type": "set_variable",
      "_nested_name": "immediate_notification_time",
      "_dynamicFields": {
        "value": [
          {
            "fullExpression": "@calc(date_fns.addSeconds(now(),10))",
            "matchedExpression": "@calc(date_fns.addSeconds(now(),10))",
            "type": "calc",
            "fieldName": "date_fns.addSeconds(now(),10)"
          }
        ]
      },
      "_dynamicDependencies": {
        "@calc(date_fns.addSeconds(now(),10))": [
          "value"
        ]
      }
    },
    {
      "type": "button",
      "value": "Set notification time in 10 seconds",
      "_translations": {
        "value": {}
      },
      "action_list": [
        {
          "trigger": "click",
          "action_id": "emit",
          "args": [
            "force_reload"
          ],
          "_raw": "click | emit: force_reload"
        }
      ],
      "name": "button_42",
      "_nested_name": "button_42"
    },
    {
      "name": "example_action_list",
      "value": [
        {
          "trigger": "notification_received",
          "action_id": "set_field",
          "args": [
            "show_notification_bell",
            true
          ],
          "_raw": "notification_received | set_field : show_notification_bell : true"
        },
        {
          "trigger": "notification_interacted",
          "action_id": "set_field",
          "args": [
            "show_notification_bell",
            false
          ],
          "_raw": "notification_interacted | set_field : show_notification_bell: false"
        },
        {
          "trigger": "notification_interacted",
          "action_id": "go_to",
          "args": [
            "/user"
          ],
          "_raw": "notification_interacted | go_to : /user"
        }
      ],
      "type": "set_variable",
      "_nested_name": "example_action_list"
    },
    {
      "type": "button",
      "value": "Schedule notification\n@local.immediate_notification_time",
      "_translations": {
        "value": {}
      },
      "action_list": [
        {
          "trigger": "click",
          "action_id": "notification",
          "args": [
            "create"
          ],
          "_raw": "click | notification: create |\nid: debug_notification_with_action_list,\ntitle: Notification Title,\ntext: Notification Text,\nschedule_at: @local.immediate_notification_time,\naction_list: @local.example_action_list",
          "params": {
            "id": "debug_notification_with_action_list",
            "title": "Notification Title",
            "text": "Notification Text",
            "schedule_at": "@local.immediate_notification_time",
            "action_list": "@local.example_action_list"
          }
        }
      ],
      "name": "button_44",
      "_nested_name": "button_44",
      "_dynamicFields": {
        "value": [
          {
            "fullExpression": "Schedule notification\n@local.immediate_notification_time",
            "matchedExpression": "@local.immediate_notification_time",
            "type": "local",
            "fieldName": "immediate_notification_time"
          }
        ],
        "action_list": {
          "0": {
            "_raw": [
              {
                "fullExpression": "click | notification: create |\nid: debug_notification_with_action_list,\ntitle: Notification Title,\ntext: Notification Text,\nschedule_at: @local.immediate_notification_time,\naction_list: @local.example_action_list",
                "matchedExpression": "@local.immediate_notification_time",
                "type": "local",
                "fieldName": "immediate_notification_time"
              },
              {
                "fullExpression": "click | notification: create |\nid: debug_notification_with_action_list,\ntitle: Notification Title,\ntext: Notification Text,\nschedule_at: @local.immediate_notification_time,\naction_list: @local.example_action_list",
                "matchedExpression": "@local.example_action_list",
                "type": "local",
                "fieldName": "example_action_list"
              }
            ],
            "params": {
              "schedule_at": [
                {
                  "fullExpression": "@local.immediate_notification_time",
                  "matchedExpression": "@local.immediate_notification_time",
                  "type": "local",
                  "fieldName": "immediate_notification_time"
                }
              ],
              "action_list": [
                {
                  "fullExpression": "@local.example_action_list",
                  "matchedExpression": "@local.example_action_list",
                  "type": "local",
                  "fieldName": "example_action_list"
                }
              ]
            }
          }
        }
      },
      "_dynamicDependencies": {
        "@local.immediate_notification_time": [
          "value",
          "action_list.0._raw",
          "action_list.0.params.schedule_at"
        ],
        "@local.example_action_list": [
          "action_list.0._raw",
          "action_list.0.params.action_list"
        ]
      }
    },
    {
      "type": "button",
      "value": "Reload Fields",
      "_translations": {
        "value": {}
      },
      "action_list": [
        {
          "trigger": "click",
          "action_id": "emit",
          "args": [
            "force_reload"
          ],
          "_raw": "click | emit: force_reload"
        }
      ],
      "name": "button_45",
      "_nested_name": "button_45"
    },
    {
      "type": "text",
      "value": "ðŸ”” New Notifications!",
      "_translations": {
        "value": {}
      },
      "condition": "@fields.show_notification_bell",
      "name": "text_46",
      "_nested_name": "text_46",
      "_dynamicFields": {
        "condition": [
          {
            "fullExpression": "@fields.show_notification_bell",
            "matchedExpression": "@fields.show_notification_bell",
            "type": "fields",
            "fieldName": "show_notification_bell"
          }
        ]
      },
      "_dynamicDependencies": {
        "@fields.show_notification_bell": [
          "condition"
        ]
      }
    },
    {
      "type": "button",
      "value": "Mark as read",
      "_translations": {
        "value": {}
      },
      "action_list": [
        {
          "trigger": "click",
          "action_id": "set_field",
          "args": [
            "show_notification_bell",
            false
          ],
          "_raw": "click | set_field : show_notification_bell : false"
        }
      ],
      "condition": "@fields.show_notification_bell",
      "name": "button_47",
      "_nested_name": "button_47",
      "_dynamicFields": {
        "condition": [
          {
            "fullExpression": "@fields.show_notification_bell",
            "matchedExpression": "@fields.show_notification_bell",
            "type": "fields",
            "fieldName": "show_notification_bell"
          }
        ]
      },
      "_dynamicDependencies": {
        "@fields.show_notification_bell": [
          "condition"
        ]
      }
    },
    {
      "type": "title",
      "value": "WiP (not yet supported)",
      "_translations": {
        "value": {}
      },
      "name": "title_48",
      "_nested_name": "title_48"
    },
    {
      "type": "text",
      "value": "Using `@notification` syntax to refer to source notification context when triggering actions",
      "_translations": {
        "value": {}
      },
      "name": "text_49",
      "_nested_name": "text_49"
    },
    {
      "type": "text",
      "value": "Specifying custom data to store with notification on create",
      "_translations": {
        "value": {}
      },
      "name": "text_50",
      "_nested_name": "text_50"
    },
    {
      "type": "text",
      "name": "triggered_actions",
      "value": "Setting action list from inline variable (set_variable only uses value column, which is not parsed as action_list type)",
      "_translations": {
        "value": {}
      },
      "action_list": [
        {
          "trigger": "notification_received",
          "action_id": "set_field",
          "args": [
            "show_notification_bell",
            true
          ],
          "_raw": "notification_received | set_field : show_notification_bell : true"
        },
        {
          "trigger": "notification_interacted",
          "action_id": "set_field",
          "args": [
            "show_notification_bell",
            false
          ],
          "_raw": "notification_interacted | set_field : show_notification_bell: false"
        },
        {
          "trigger": "notification_interacted",
          "action_id": "go_to",
          "args": [
            "/user"
          ],
          "_raw": "notification_interacted | go_to : /user"
        }
      ],
      "_nested_name": "triggered_actions"
    }
  ],
  "_source": {
    "name": "Debug Sheets",
    "path": "feature_sheets/feature_notification_actions.xlsx",
    "url": "https://docs.google.com/spreadsheets/d/1m_q57wKk7rWCzW5J2DQu8IH4DNYM_rILbDifrN-d_iQ"
  }
}